{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %}</title>
    <link rel="shortcut icon" href="{% static 'image/nuevas/favicon.png' %}">
    <link
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;0,900;1,400;1,500;1,700&display=swap"
            rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/nuevas/feather.css' %}">
    <link rel="stylesheet" href="{% static 'css/nuevas/flags.css' %}">
{#    <link rel="stylesheet" href="{% static 'css/nuevas/bootstrap.min.css' %}">#}
    <link rel="stylesheet" href="{% static 'css/fontawesome/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/nuevas/style1.css' %}">
    <link rel="stylesheet" href="{% static 'css/nuevas/style.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
    <link rel='stylesheet'
          href='https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link type='text/css' rel='stylesheet' href="/static/css/select2.css"/>

    <link href="/static/bootstrap5/libs/datatables.net-bs5/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <link href="/static/bootstrap5/libs/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="/static/bootstrap5/libs/dragula/dist/dragula.min.css" rel="stylesheet"/>
    <link href="/static/bootstrap5/libs/%40mdi/font/css/materialdesignicons.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/static/bootstrap5/css/theme.min.css?23.1.2">
    <link rel="stylesheet" href="/static/bootstrap5/css/style.css?12.4.3">
    <link href="/static/bootstrap5/libs/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="/static/bootstrap5/bootstrap-responsive.css?6.0.8" rel="stylesheet"/>
    <link rel="stylesheet" href="/static/bootstrap5/fonts/robotofont.css?0.1">
    <script src="/static/bootstrap5/libs/jquery/dist/jquery.min.js"></script>
    <script type='text/javascript' src="/static/bootstrap5/js/jquery.blockUI.js?v=2.71.0"></script>

    <!-- Datatable -->
    <link rel="stylesheet" href="/static/datatables/datatables.css?0.1">
    <script src="/static/datatables/datatables.js?0.1"></script>
    <link rel="stylesheet" href="/static/datatables/html2canvas.min.js">
    <link rel="stylesheet" href="/static/datatables/responsive.bootstrap.min.css">
    <script src="/static/datatables/dataTables.responsive.min.js"></script>
    <script src="/static/datatables/responsive.bootstrap.min.js"></script>
    <link rel="stylesheet" href="/static/datatables/dataTables.bootstrap.min.css">
    <link rel="stylesheet" href="/static/datatables/buttons.bootstrap.min.css">
    <link rel="stylesheet" href="/static/datatables/bootstrap-toggle.min.css">
    <script src="/static/datatables/dataTables.buttons.min.js"></script>
    <style>
        .page-wrapper {
            background-color: rgba(255, 255, 255, 0.326);
        }

    </style>
</head>

<body>
    <div class="modal fade static" id="itemspanel" style="display: none;">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document" id="wmodal">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><b class="paneltitle">FORMULARIO MODAL</b></h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body" style="padding: 1.5%;">
                    <form class="form-horizontal form-modal" autocomplete="off" method="post"
                          enctype="multipart/form-data" action="{{ request.path }}">
                        {% csrf_token %}
                        <div class="row panelbody">
                        </div>
                    </form>
                </div>
                <div class="modal-footer" id="footermodal">
                    <button type="button" class="btn btn-default" data-bs-dismiss="modal" id="cerrar"><i
                            class="fa fa-times"></i> Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="main-wrapper">

        <div class="header">

            <div class="header-left text-center">
                <a href="{% url 'home' %}" class="logo ">
                    <img src="{% static 'image/school.png' %}" alt="Logo">
                </a>
                <a href="{% url 'home' %}" class="logo logo-small">
                    <img src="{% static 'image/nuevas/logo-small.png' %}" alt="Logo" width="30" height="30">
                </a>
            </div>
            <div class="menu-toggle">
                <a href="javascript:void(0);" id="toggle_btn">
                    <i class="bi bi-list"></i>
                </a>
            </div>

            <!-- <div class="top-nav-search"> -->
            <!-- <form>
                    <input type="text" class="form-control" placeholder="Search here">
                    <button class="btn" type="submit"><i class="bi bi-search"></i></button>
                </form>
            </div> -->
            <a class="mobile_btn" id="mobile_btn">
                <i class="fas fa-bars"></i>
            </a>

            <ul class="nav user-menu">
                <li class="nav-item zoom-screen me-2">
                    <a href="#" class="nav-link header-nav-list win-maximize">
                        <img src="{% static 'image/nuevas/header-icon-04.svg' %}" alt="">
                    </a>
                </li>

                <li class="nav-item dropdown has-arrow new-user-menus">
                    <a href="#" class="dropdown-toggle nav-link" data-bs-toggle="dropdown">
                            <span class="user-img">
                                {% if not persona %}
                                    <i class="fa fa-user"></i>
                                    <div class="user-text">
                                    <h6 style="text-transform:capitalize">{{ user }}</h6>
                                    <p class="text-muted mb-0">Sin perfil</p>
                                </div>
                                {% else %}
                                    <img class="rounded-circle"
                                         src="{% if persona.picture %}{{ persona.picture.url }}{% endif %}" width="31"
                                         alt="Soeng Souy">
                                    <div class="user-text">
                                    <h6 style="text-transform:capitalize">{{ persona.nombre_simple }}</h6>
                                    <p class="text-muted mb-0">{{ persona.get_perfil_display }}</p>
                                </div>
                                {% endif %}

                            </span>
                    </a>
                    <div class="dropdown-menu fs-3">
                        <a class="dropdown-item" href=""><i class="nav-link fa-solid fa-user-edit"></i> Editar perfil</a>
                        <a class="dropdown-item" href="{% url 'logout' %}"><i class="nav-link fa-solid fa-right-from-bracket"></i> Cerrar sesión</a>
                    </div>
                </li>

            </ul>

        </div>



        {% block sidebar %}
        {% endblock %}

        <div class="page-wrapper">
            <div class="content container-fluid">
                {% block content %}
                {% endblock %}
            </div>
        </div>

        <hr/>
        <footer>

            <p style="margin-left: 200px;">&copy; {{ year }} - My Django Application</p>
            <br>
            <p style="margin-left: 200px;">Copyright © 2023 Dreamguys.</p>
        </footer>
        <script src="{% static 'js/nuevas/jquery-3.6.0.min.js' %}"></script>
    {#    <script src="{% static 'js/nuevas/bootstrap.bundle.min.js' %}"></script>#}
        <script src="{% static 'js/nuevas/feather.min.js' %}"></script>
        <script src="{% static 'js/nuevas/jquery.slimscroll.min.js' %}"></script>
        <script src="{% static 'js/nuevas/apexcharts.min.js' %}"></script>
        <script src="{% static 'js/nuevas/chart-data.js' %}"></script>
        <script src="{% static 'js/nuevas/script.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/select2.js' %}"></script>
        <script src="/static/bootstrap5/libs/bootstrap/libs/bootstrap.bundle.min.js?12.2"></script>
        <script src="/static/bootstrap5/libs/magnific-popup/dist/jquery.magnific-popup.min.js"></script>
        <script src="/static/bootstrap5/libs/inputmask/dist/jquery.inputmask.min.js"></script>
        <script src="/static/bootstrap5/libs/dragula/dist/dragula.min.js"></script>
        <script src="/static/bootstrap5/js/theme.min.js?4.11"></script>

        <script>
            function eliminarajax(pk, nombre, accion, url = '{{ request.path }}', titulo = 'Estás por eliminar este registro:') {
                Swal.fire({
                    html: `<b>${titulo}</b> ${nombre}`,
                    text: "Esta acción es irreversible",
                    icon: 'info',
                    showCancelButton: true,
                    allowOutsideClick: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Si, deseo hacerlo',
                    cancelButtonText: 'Cancelar'
                }).then((result) => {
                    if (result.value) {
                        $.ajax({
                            type: 'POST',
                            url: '{{ reques.path }}',
                            async: false,
                            data: {
                                csrfmiddlewaretoken: '{{ csrf_token }}',
                                action: accion,
                                id: pk,
                            },
                            dataType: "json",
                            beforeSend: function () {
                            }
                        }).done(function (data) {
                            if (data.error === false) {
                                location.reload();
                            }
                        }).fail(function (jqXHR, textStatus, errorThrown) {
                           mensajeDanger('Error en el servidor')
                        }).always(function () {
                        });
                    } else {
                    }
                })
            }

            $(function () {
                {% if messages %}
                     Swal.fire(
                         {% for message in messages %}
                             '{{ message }}'
                         {% endfor %},
                         '{{ nombreempresa }}',
                         'error'
                     )

                {% endif %}
            })
            function mensajeSuccess(mensaje) {
                Swal.fire(mensaje, '{{ nombreempresa }}', 'success')
            }

            function mensajeWarning(mensaje) {
                Swal.fire(mensaje, '{{ nombreempresa }}', 'warning')
            }

            function mensajeDanger(mensaje) {
                Swal.fire(mensaje, '{{ nombreempresa }}', 'error')
            }

        </script>
        <script>
            function formModal(idp, id, text, action, dimension, footer = true, idex) {
                $('#footermodal').show();
                $.ajax({
                    type: "GET",
                    url: `{{ request.path }}`,
                    data: {
                        'action': action,
                        'id': id,
                        'idp': idp,
                        'idex': idex,
                    },
                    success: function (data) {
                        if (dimension) {
                            $('#wmodal').removeClass('modal-lg').addClass(dimension)
                        }
                        if (data.result === true) {
                            if (footer === true) {
                                $('#footermodal').hide();
                            }
                            $('.panelbody').html(data.data);
                            $('#itemspanel .paneltitle').html(text.toUpperCase());
                            $("#itemspanel").modal({backdrop: 'static'}).modal('show');
                        } else {
                            mensajeDanger(data.message);
                        }
                    },
                    error: function () {
                        mensajeDanger("Error de conexión.");
                    },
                    dataType: "json"
                });
            }
        </script>
        {% block srcjs %}{% endblock %}
        {% block scriptjs %}{% endblock %}

</body>

</html>